name: Publish

on:
  push:
    branches: [main, master, dev]
  pull_request:
    branches: [main, master, dev]
  release:
    types:
      - created
    tags:
      - "v[0-9]+"
      - "v[0-9]+.[0-9]+"
      - "v[0-9]+.[0-9]+.[0-9]+"

jobs:
  publish:
    uses: zondax/_workflows/.github/workflows/_publish-docker.yaml@v3
    with:
      checkout_ref: ${{ github.event.pull_request.head.ref || github.ref }}
    secrets:
      DOCKERHUB_USER: ${{ secrets.DOCKERHUB_USER }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}
